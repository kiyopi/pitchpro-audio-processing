# PitchPro Audio Processing - デバイス最適化最終値 (2025年9月15日確定)

## 📊 当初の最適値と現在値の比較表

### 設定値の比較

| パラメータ | PC | iPhone | iPad |
|-----------|-----|---------|------|
| **【当初の最適値】** | | | |
| 音量閾値 | 1.5% | 1.5% | 1.5% |
| 明瞭度閾値 | 0.6 | 0.6 | 0.6 |
| マイク感度 | 2.5x | 3.5x | 5.0x |
| 音量バー感度 | 2.5x | 4.5x | 7.0x |
| **【現在の実装値】** | | | |
| 音量閾値 (noiseGate) | 3.5% (0.035) | 1.5% (0.015) | 1.5% (0.015) |
| 明瞭度閾値 (clarity) | 0.6 | 0.6 | 0.6 |
| マイク感度 (sensitivity) | 1.8x | 3.5x | 5.0x |
| 音量バー感度 (volumeMultiplier) | 3.0x | 7.5x | 20.0x |
| minVolumeAbsolute計算 | noiseGate × 0.25 | noiseGate × 0.15 | noiseGate × 0.10 |
| 実効minVolumeAbsolute | 0.875% | 0.225% | 0.15% |

### 📈 調整履歴と理由

#### PC
- **マイク感度**: 2.5x → 1.8x（音量上昇速度の抑制）
- **音量バー感度**: 2.5x → 3.0x（適正レベル調整）
- **音量閾値**: 1.5% → 3.5%（ノイズ除去の強化）
- **結果**: ✅ 普通の声で適正レベル（60-80%）達成

#### iPhone
- **マイク感度**: 3.5x → 3.5x（変更なし、最適）
- **音量バー感度**: 4.5x → 7.5x（67%上昇、実測調整）
- **音量閾値**: 1.5% → 1.5%（変更なし、最適）
- **結果**: ✅ ユーザー確認済み、最適化完了

#### iPad
- **マイク感度**: 5.0x → 5.0x（変更なし、最適）
- **音量バー感度**: 7.0x → 20.0x（186%上昇、大幅調整）
- **音量閾値**: 1.5% → 1.5%（変更なし、最適）
- **結果**: ✅ 67%達成、目標範囲内

### 🎯 最終調整の成果

1. **全デバイスで目標達成**: 普通の声で60-80%の音量レベル
2. **デバイス特性に応じた最適化**: PC/iPhone/iPadそれぞれの特性に合わせた調整
3. **ノイズゲート最適化**: デバイスごとに異なるminVolumeAbsolute計算式

### 📝 今後の参考事項

- **PC**: noiseGateが高め（3.5%）でノイズ除去重視
- **iPhone**: バランス型の設定、volumeMultiplierで音量調整
- **iPad**: volumeMultiplierが非常に高い（20.0x）、マイク特性の違いが顕著

## コード実装箇所

- デバイス検出: `src/utils/DeviceDetection.ts`
- 設定適用: `src/components/AudioDetectionComponent.ts`の`detectAndOptimizeDevice()`メソッド
- 音量処理: `AudioDetectionComponent`の`_getProcessedResult()`メソッド