# PitchPro v1.3.22ã€œv1.3.25: overrideæ©Ÿèƒ½ãƒ»Androidå¯¾å¿œãƒ»iPadæœ€é©åŒ–

## æ¦‚è¦
2025å¹´12æœˆ3æ—¥ã«å®Ÿæ–½ã—ãŸãƒ€ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–ã¨ãƒãƒ«ãƒãƒ‡ãƒã‚¤ã‚¹å¯¾å¿œã®ä¿®æ­£è¨˜éŒ²ã€‚

---

## v1.3.22: overrideNoiseGate / overrideVolumeMultiplier è¿½åŠ 

### èƒŒæ™¯
- iPhoneã®æº–å‚™ãƒšãƒ¼ã‚¸ã¨ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒšãƒ¼ã‚¸ã§ç•°ãªã‚‹éŸ³é‡è¨­å®šãŒå¿…è¦
- æº–å‚™ãƒšãƒ¼ã‚¸: BGMãªã— â†’ noiseGate 25%ã§ãƒã‚¤ã‚ºãƒ–ãƒ­ãƒƒã‚¯
- ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒšãƒ¼ã‚¸: BGMã‚ã‚Šï¼ˆãƒ€ãƒƒã‚­ãƒ³ã‚°ç™ºç”Ÿï¼‰â†’ noiseGate 15%ã§å£°ã‚’é€šã™

### å•é¡Œ
DeviceDetection.tsã®è¨­å®šã¯å…¨ãƒšãƒ¼ã‚¸å…±é€šã®ãŸã‚ã€ãƒšãƒ¼ã‚¸ã”ã¨ã«è¨­å®šã‚’å¤‰ãˆã‚‰ã‚Œãªã‹ã£ãŸã€‚

### è§£æ±ºç­–
`updateSelectors()`ã§`noiseGate`ã¨`volumeMultiplier`ã‚’ä¸Šæ›¸ãã§ãã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã€‚

### å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«
- `src/components/AudioDetectionComponent.ts`
  - `AudioDetectionConfig`ã«`overrideNoiseGate?: number`è¿½åŠ 
  - `AudioDetectionConfig`ã«`overrideVolumeMultiplier?: number`è¿½åŠ 
  - `updateSelectors()`ã§overrideå€¤ã‚’å—ã‘å–ã‚Œã‚‹ã‚ˆã†ã«å‹å®šç¾©ã‚’æ‹¡å¼µ
  - `_getProcessedResult()`ã§overrideå€¤ã‚’å„ªå…ˆã—ã¦ä½¿ç”¨

### ä½¿ç”¨ä¾‹
```javascript
// iPhoneã®ãƒ€ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–
await audioDetector.updateSelectors({
    volumeBarSelector: '#training-volume-progress',
    overrideNoiseGate: 0.15,       // 25%â†’15%ã«ä¸‹ã’ã‚‹
    overrideVolumeMultiplier: 2.5  // éŸ³é‡è¡¨ç¤ºã‚’ä¸Šã’ã‚‹
});
```

### ãƒ­ã‚°å‡ºåŠ›
```
ğŸšª [v1.3.22] overrideNoiseGate set to: 0.15 (15.0%)
ğŸ”Š [v1.3.22] overrideVolumeMultiplier set to: 2.5
ğŸ” [_getProcessedResult] volumeAsPercent:25.03% noiseGate:15.00% (OVERRIDE) deviceSpecs:OK
```

---

## v1.3.23: Androidå¯¾å¿œã¨ãƒ‡ãƒã‚¤ã‚¹åˆ¥overrideåˆ¶å¾¡

### èƒŒæ™¯
- AndroidãŒã€ŒPCã€ã¨ã—ã¦æ‰±ã‚ã‚Œã¦ã„ãŸ
- iPhoneã®ãƒ€ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–ç”¨overrideãŒä»–ãƒ‡ãƒã‚¤ã‚¹ã«æ‚ªå½±éŸ¿ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§

### å¤‰æ›´å†…å®¹

#### 1. Androidæ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯è¿½åŠ 
```typescript
// DeviceDetection.ts
const isAndroid = /Android/i.test(userAgent);

if (isAndroid) {
  deviceType = 'Android';
}
```

#### 2. DeviceSpecså‹ã«Androidè¿½åŠ 
```typescript
// types/index.ts
deviceType: 'iPhone' | 'iPad' | 'Android' | 'PC';
```

#### 3. Androidå°‚ç”¨æœ€é©åŒ–è¨­å®š
```typescript
case 'Android':
  return {
    sensitivity: 2.0,
    noiseGate: 0.08,        // 8%
    volumeMultiplier: 2.5,
    smoothingFactor: 0.1
  };
```

---

## v1.3.24: iPad volumeMultiplierèª¿æ•´

### èƒŒæ™¯
iPadæº–å‚™ãƒšãƒ¼ã‚¸ã§éŸ³é‡ãƒãƒ¼ãŒã™ãã«100%ã«é”ã™ã‚‹å•é¡Œã€‚

### å•é¡Œåˆ†æ
ãƒ­ã‚°åˆ†æ: `volumeAsPercent 36-65%` Ã— `volumeMultiplier 3.0` = **100%è¶…ãˆ**

### è§£æ±ºç­–
iPad volumeMultiplier: **3.0 â†’ 1.2** ã«å‰Šæ¸›

---

## v1.3.25: iPad noiseGateèª¿æ•´ãƒ»iPadãƒ€ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–

### èƒŒæ™¯
1. iPadæº–å‚™ãƒšãƒ¼ã‚¸ã§å¸¸æ™‚ãƒã‚¤ã‚ºã‚’æ‹¾ã†å•é¡Œ
2. iPadã§ã‚‚ãƒ€ãƒƒã‚­ãƒ³ã‚°ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ãŒåˆ¤æ˜

### å•é¡Œåˆ†æ
ãƒ­ã‚°åˆ†æ: é™å¯‚æ™‚ã§ã‚‚ `volumeAsPercent 8%ã€œ10%` ã®ãƒã‚¤ã‚ºç™ºç”Ÿ
noiseGate 5%ã§ã¯ä¸ååˆ†ã§ãƒã‚¤ã‚ºãŒã‚¹ãƒ«ãƒ¼

### è§£æ±ºç­–

#### 1. DeviceDetection.ts - iPad noiseGateèª¿æ•´
```typescript
case 'iPad':
  return {
    sensitivity: 2.5,
    noiseGate: 0.12,         // 5% â†’ 12% (ãƒã‚¤ã‚ºãƒ–ãƒ­ãƒƒã‚¯)
    volumeMultiplier: 1.2,   // v1.3.24ã§èª¿æ•´æ¸ˆã¿
    smoothingFactor: 0.1
  };
```

#### 2. trainingController.js v4.12.2 - iPad overrideè¿½åŠ 
```javascript
const isIPhone = window.DeviceDetector?.isIPhone?.() || /iPhone/.test(navigator.userAgent);
const isIPad = window.DeviceDetector?.isIPad?.() || /iPad/.test(navigator.userAgent) ||
               (/Macintosh/.test(navigator.userAgent) && 'ontouchend' in document);

if (isIPhone) {
    selectorConfig.overrideNoiseGate = 0.15;
    selectorConfig.overrideVolumeMultiplier = 2.5;
} else if (isIPad) {
    selectorConfig.overrideNoiseGate = 0.08;     // ãƒ€ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–
    selectorConfig.overrideVolumeMultiplier = 4.0; // v4.12.4ã§èª¿æ•´
}
```

---

## æœ€çµ‚ãƒ‡ãƒã‚¤ã‚¹åˆ¥è¨­å®šä¸€è¦§ï¼ˆv1.3.25ç¢ºå®šï¼‰

### æº–å‚™ãƒšãƒ¼ã‚¸ï¼ˆDeviceDetection.tsãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šï¼‰
| ãƒ‡ãƒã‚¤ã‚¹ | noiseGate | volumeMultiplier | å‚™è€ƒ |
|----------|-----------|------------------|------|
| iPhone | 25% | 1.2 | ã‚¢ãƒ—ãƒªãŒsensitivity 8xã«ä¸Šæ›¸ã |
| iPad | **12%** | **1.2** | v1.3.25ã§ãƒã‚¤ã‚ºå¯¾ç­– |
| Android | 8% | 2.5 | v1.3.23ã§æ–°è¦è¿½åŠ  |
| PC | 3% | 3.5 | ãƒ€ãƒƒã‚­ãƒ³ã‚°ãªã— |

### ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒšãƒ¼ã‚¸ï¼ˆoverrideé©ç”¨ - trainingController.jsï¼‰
| ãƒ‡ãƒã‚¤ã‚¹ | noiseGate | volumeMultiplier | overrideé©ç”¨ |
|----------|-----------|------------------|--------------|
| iPhone | **15%** | **2.5** | âœ… é©ç”¨ |
| iPad | **8%** | **4.0** | âœ… é©ç”¨ |
| Android | 8% | 2.5 | âŒ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
| PC | 3% | 3.5 | âŒ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |

---

## æ—¢çŸ¥ã®å•é¡Œ: iOS Safari getUserMediaãƒã‚°

### æ¦‚è¦
WebKit Bug 230902: ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰å¾Œã«`getUserMedia()`ã‚’å†å‘¼ã³å‡ºã—ã™ã‚‹ã¨ã€ãƒã‚¤ã‚¯å…¥åŠ›ãƒ¬ãƒ™ãƒ«ãŒå¤§å¹…ã«ä½ä¸‹ã™ã‚‹ã€‚

### ç—‡çŠ¶
- ãƒªãƒ­ãƒ¼ãƒ‰å‰: `volumeAsPercent 60-75%`
- ãƒªãƒ­ãƒ¼ãƒ‰å¾Œ: `volumeAsPercent 15-20%`ï¼ˆç´„4åˆ†ã®1ã«ä½ä¸‹ï¼‰

### å¯¾ç­–
- **ã‚¢ãƒ—ãƒªå´å¯¾ç­–**: preparation-pitchpro-cycle.js v4.12.5ã§iOS/iPadOSãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã«è­¦å‘Šè¡¨ç¤º
- **æ ¹æœ¬è§£æ±º**: Appleã®ãƒã‚°ä¿®æ­£å¾…ã¡

### å‚ç…§
- serenaãƒ¡ãƒ¢ãƒª: `iOS_Safari_getUserMedia_volume_issue`
- WebKit Bug: https://bugs.webkit.org/show_bug.cgi?id=230902

---

## å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

### PitchProãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- `src/components/AudioDetectionComponent.ts` - overrideæ©Ÿèƒ½è¿½åŠ 
- `src/utils/DeviceDetection.ts` - Androidæ¤œå‡ºã€iPadæœ€é©åŒ–
- `src/types/index.ts` - DeviceSpecså‹ã«Androidè¿½åŠ 

### ã‚¢ãƒ—ãƒªå´
- `trainingController.js` v4.12.4 - iPhone/iPad overrideé©ç”¨
- `preparation-pitchpro-cycle.js` v4.12.5 - iOSãƒªãƒ­ãƒ¼ãƒ‰è­¦å‘Š
- `index.html` - PitchPro v1.3.25èª­ã¿è¾¼ã¿

---

## æ›´æ–°å±¥æ­´
- 2025-12-03: v1.3.22 overrideæ©Ÿèƒ½è¿½åŠ 
- 2025-12-03: v1.3.23 Androidå¯¾å¿œ
- 2025-12-03: v1.3.24 iPad volumeMultiplierèª¿æ•´ï¼ˆ3.0â†’1.2ï¼‰
- 2025-12-03: v1.3.25 iPad noiseGateèª¿æ•´ï¼ˆ5%â†’12%ï¼‰ã€iPadãƒ€ãƒƒã‚­ãƒ³ã‚°å¯¾ç­–overrideè¿½åŠ 
